<body>
    <div class="tradingview-widget-container">
        <div class="tradingview-widget-container__widget"></div>
        <div class="tradingview-widget-copyright" id="view"></div>
    </div>
    <script type="text/javascript">
        function getParameterByName(name, url = window.location.href) {
            name = name.replace(/[\[\]]/g, '\\$&');
            var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, ' '));
        }
        const container = document.getElementById("view")
        const symbol = getParameterByName('pair')
        document.addEventListener('DOMContentLoaded', function () {
            var iframe = document.createElement('iframe')
            iframe.setAttribute(
                'src',
                `https://s.tradingview.com/embed-widget/mini-symbol-overview#{"symbol":"${symbol}","dateRange":"1D","colorTheme":"dark","trendLineColor":"rgba(41, 98, 255, 1)"}`,
            );
            iframe.setAttribute('frameborder', 0)
            iframe.setAttribute('style', 'box-sizing: border-box; height: 100%; width: 100%;')
            iframe.setAttribute('trendLineColor', 'rgba(41, 98, 255, 1)')
            iframe.setAttribute('underLineColor', 'rgba(41, 98, 255, 0.3)')
            iframe.setAttribute('underLineBottomColor', 'rgba(41, 98, 255, 0)')
            container.appendChild(iframe)
        });
    </script>
    </div>
</body>
